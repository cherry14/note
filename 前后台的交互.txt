《三次握手与四次挥手》
>三次握手：
在TCP/IP协议中，TCP协议提供可靠的连接服务，采用三次握手建立一个连接，
  第一次握手：建立连接时，客户端发送SYN(syn=j)包大服务器，并进入SYN_SEND状态，等	                      待服务器确认；
  第二次握手：服务器收到SYN包，必须确认客户的SYN（ack=j+1），同时自己也发送一个                      SYN+ACK包，此时服务器进入SYN_RECV状态；
  第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ACK=k+1),此包                       发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手。


>四次挥手：
    由于TCP连接是全双工的，因此每个方向都必须单独进行关闭。这个原则是当一方完成它的数据发送任务后就能发送一个FIN来终止这个方向的连接。收到一个 FIN只意味着这一方向上没有数据流动，一个TCP连接在收到一个FIN后仍能发送数据。
首先进行关闭的一方将执行主动关闭，而另一方执行被动关闭。
第一次挥手：客户端发送一个FIN，用来关闭客户端到服务器的数据传送。
第二次挥手：服务器收到这个FIN，它发回一个ACK，确认序号为收到的序号加1；
第三次挥手：服务器关闭客户端的链接，发送一个FIN给客户端；
第四次挥手：客户端发回ACK报文确认，并将确认序号设置为收到序号+1;


>为什么建立连接是三次握手，而关闭连接是四次挥手呢？
        这是因为服务端的LISTEN状态下的SOCKET当收到SYN报文的连接请求后，它可以把ACK和SYN(ack起应答作用）放在一个报文里来发送。但关闭连接时，当收到对方的FIN报文通知时，它仅仅表示对方没有数据发送给你了；但未必你所有的数据都全部发送给对方了，所以你可能未必会马上会关闭SOCKET，也即你可能还需要发送一些数据给对方之后，再发送给FIN报文给对方来表示你同意现在可以关闭连接了，所以它这里的ACK报文和FIN报文多数情况下都是分开发送的。


>为什么不能进行2次握手?
   三次握手完成了两个重要的功能，既要双方做好发送数据的准备工作(双方都知道彼此已准备好)，也要允许双方就初序列号进行协商，这个序列号在握手过程中被发送和确认，
  现在把三次握手改成仅需要两次握手，死锁是可能发生的。作为例子，开率计算机S和C之间的通信，假定c给S发送一个连接请求分组，并确认了答应请求分组，按照两次握手的协定，S认为连接已经成功地建立了，可以开始发送数据分组。可是，c在s的应答分组在传输中被丢失的情况下，将不知道s是否已经准备好，不知道s建立什么样的的序列号，c甚至怀疑s是否收到自己的连接请求分组。在这种情况下，c认为连接还未建立成功，将忽略s发来的任何数据分组，只等待连接确认应答分组，而s在发出的分组超时后，重复发送同样的分组，这样就形成了死锁。




>tcp与udp协议的区别是什么（常见面试题）
   tcp协议是有连接的，有链接的意思是开始传输实际数据之前的TCP的客户服务器端必须三次握手建立连接，会话技术之后也要结束连接，而udp是无连接的；
    TCP协议保证数据按顺序进行发送，按序到达，提供超时重传来保证可靠性，到那时UDP不保证按序传达，甚至不保证到达，只是努力提交，及时保证按序发送，也不能保证按序送到；
    TCP协议所需资源多，TCP首部20个字节，UDP只有8个；
    TCP有流量监控和拥塞控制，UDP没有，网络拥堵不会影响发送端的发送速率；
    TCP面向的是字节流的服务，UDP面向的是报文服务；

     







